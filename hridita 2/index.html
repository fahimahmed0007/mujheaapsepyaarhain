<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Universe</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&family=Nunito:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- THEME --- */
        body {
            background: url('intro-bg.jpg') no-repeat center center fixed; 
            background-size: cover;
            color: #FFB7B2;
            font-family: 'Nunito', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
            transition: background 0.8s ease-in-out;
        }

        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 0;
        }

        .container {
            width: 85%;
            max-width: 500px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.6); 
            border: 2px solid rgba(255, 105, 180, 0.6);
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.3);
            position: relative;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        input, textarea {
            width: 90%;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid #FF69B4;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            outline: none;
        }
        
        textarea { height: 100px; resize: none; }
        input::placeholder, textarea::placeholder { color: rgba(255, 255, 255, 0.7); }

        p.shayari {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #fff;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px #000;
            font-weight: 700;
        }

        h1 {
            font-family: 'Sacramento', cursive;
            color: #FF69B4;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 2px #000, 0 0 15px #FF69B4;
        }

        button {
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Nunito', sans-serif;
            transition: transform 0.2s;
            margin-top: 10px;
        }

        .next-btn {
            background-color: #FF69B4;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.8);
        }

        #noBtn {
            background: #000; 
            color: #fff;      
            border: 2px solid #FF69B4; 
            position: relative; 
            z-index: 9999;
            transition: top 0.3s ease, left 0.3s ease;
        }

        .page { display: none; animation: fadeIn 0.8s ease; }
        #page-name { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typewriter h1 {
            overflow: hidden; border-right: .15em solid orange; 
            white-space: nowrap; margin: 0 auto; 
            animation: typing 3.5s steps(30, end), blink-caret .75s step-end infinite;
            max-width: fit-content;
        }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #FF69B4; } }

    </style>
</head>
<body>

    <div class="overlay"></div>

    <div class="container page" id="page-name">
        <h1>Welcome, My Universe</h1>
        <p class="shayari">Before we begin, may I know who owns this heart?</p>
        <input type="text" id="nameInput" placeholder="Type your name here...">
        <button class="next-btn" onclick="validateName()">Enter ‚ù§Ô∏è</button>
    </div>

    <div class="container page" id="page-why">
        <h1>Tell me one thing...</h1>
        <p class="shayari">Why did you think he is the one?</p>
        <textarea id="whyInput" placeholder="Pour your heart out..."></textarea>
        <button class="next-btn" onclick="validateAnswer()">Next ‚ú®</button>
    </div>

    <div class="container page" id="page-proposal">
        <div class="shayari">
            <p>Meri du‚Äôayein tumhara hi zikr karti hain, jab paas nahi hoti tum,<br>
            Meri du‚Äôayein odh le tumhe... chahe kitni bhi door ho tum.</p>
            <div class="typewriter">
                <h1>Kya rahoge wahan tum?</h1>
            </div>
        </div>
        <div style="margin-top: 25px;">
            <button class="next-btn" id="yesBtn">Haan jii üñ§</button>
            <button id="noBtn" style="margin-left: 20px;">Nahiiiii üò≠üò≠</button>
        </div>
    </div>

    <div class="container page" id="page-pleading">
        <div class="shayari">
            <p>Na dhuaan maar sakega, na koi sadma maarega,<br>
            Na qaza maaregi mujhko, na ye zamana maarega.</p>
            <p style="color: #FF69B4; font-size: 1.2rem; margin-top: 15px;">
                Aapke bagair kaun hain mere...<br>
                minaat hain aapse maan jaaona please ü•∫
            </p>
        </div>
        <button class="next-btn" id="forceYesBtn">Main to sirf aapki hi begum hun üôà</button>
    </div>

    <div class="container page" id="page-success">
        <div class="shayari">
            <p>Aapki nigah ki wo besaakhta chahat, ab humein pareshaan karti hai,</p>
            <p>Aapki zulfon ki mehek, kaynaat ke har itr se behtar lagti hai. ‚ú®</p>
            <h1 style="font-size: 3.5rem; margin-top:20px;">Mujhe aapse  beinteha mohobbat hain ‚ù§Ô∏è</h1>
        </div>
    </div>

    <script>
        // ‚ö†Ô∏è PASTE YOUR GOOGLE SCRIPT URL HERE (Inside the quotes):
        const scriptURL = 'https://script.google.com/macros/s/AKfycby7wX5oZZzUfqodotbRd-oZnSnJIzEbe1qwaqmVnTN-d_QTyVp1wRVjsUPMW3nB52qBCA/exec';

        let herName = "";
        let herReason = "";

        function validateName() {
            const name = document.getElementById('nameInput').value;
            if (name.trim() === "") {
                alert("Please tell me your name first! ü•∫");
            } else {
                herName = name; 
                document.getElementById('page-name').style.display = 'none';
                document.getElementById('page-why').style.display = 'block';
                document.body.style.backgroundImage = "url('question-bg.jpg')";
            }
        }

        function validateAnswer() {
            const answer = document.getElementById('whyInput').value;
            if (answer.trim() === "") {
                alert("You have to answer this one! Why him? ü•∫");
            } else {
                herReason = answer;
                
                // --- THIS SENDS DATA TO SHEETS ---
                const formData = new FormData();
                formData.append('name', herName);
                formData.append('reason', herReason);
                
                fetch(scriptURL, { method: 'POST', body: formData })
                    .then(response => console.log('Success!', response))
                    .catch(error => console.error('Error!', error.message));

                document.getElementById('page-why').style.display = 'none';
                document.getElementById('page-proposal').style.display = 'block';
                document.body.style.backgroundImage = "url('hamster-pleading.gif')";
            }
        }

        // --- BUTTON TRICK ---
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const forceYesBtn = document.getElementById('forceYesBtn');
        let noClickCount = 0;

        const handleNoInteraction = (e) => {
            if (e.type === 'touchstart') e.preventDefault();
            noClickCount++; 

            if (noClickCount >= 5) {
                document.getElementById('page-proposal').style.display = 'none';
                document.getElementById('page-pleading').style.display = 'block';
                document.body.style.backgroundImage = "url('kitty.gif')";
                return; 
            }

            // --- THE SAFE ZONE MATH (20% Padding) ---
            const screenW = window.innerWidth;
            const screenH = window.innerHeight;
            
            // We force the button to stay within the middle 60% of the screen
            // (20% margin on left, 20% margin on right)
            const minX = screenW * 0.2; 
            const maxX = screenW * 0.8 - noBtn.offsetWidth;
            const minY = screenH * 0.2;
            const maxY = screenH * 0.8 - noBtn.offsetHeight;
            
            const randomX = Math.random() * (maxX - minX) + minX;
            const randomY = Math.random() * (maxY - minY) + minY;
            
            noBtn.style.position = 'fixed'; 
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        };

        noBtn.addEventListener('mouseover', handleNoInteraction);
        noBtn.addEventListener('click', handleNoInteraction);
        noBtn.addEventListener('touchstart', handleNoInteraction);

        yesBtn.addEventListener('click', goToSuccess);
        forceYesBtn.addEventListener('click', () => {
            document.getElementById('page-pleading').style.display = 'none'; 
            goToSuccess(); 
        });

        function goToSuccess() {
            document.getElementById('page-proposal').style.display = 'none';
            document.getElementById('page-success').style.display = 'block';
            document.body.style.backgroundImage = "url('animation.gif')"; 
            triggerConfetti();
        }

        function triggerConfetti() {
            const duration = 3000;
            const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff69b4', '#ffb7b2'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff69b4', '#ffb7b2'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>
</html>

